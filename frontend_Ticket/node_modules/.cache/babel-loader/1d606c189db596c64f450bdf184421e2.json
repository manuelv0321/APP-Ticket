{"ast":null,"code":"import _defineProperty from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\src\\\\componentes\\\\productos\\\\EditarProducto.js\";\nimport React, { useState, useEffect, Fragment } from 'react';\nimport Swal from 'sweetalert2';\nimport clienteAxios from '../../config/axios';\nimport { withRouter } from 'react-router-dom';\nimport Spinner from '../layout/Spinner';\n\nfunction EditarProductos(props) {\n  // obtener el ID\n  var id = props.match.params.id; // producto = state, y funcion para actualizar\n\n  var _useState = useState({\n    nombre: '',\n    precio: '',\n    imagen: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      producto = _useState2[0],\n      guardarProducto = _useState2[1]; // archivo = state, guardarArchivo = setState\n\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      archivo = _useState4[0],\n      guardarArchivo = _useState4[1]; // cuando el componente carga\n\n\n  useEffect(function () {\n    // consultar la api para traer el producto a editar\n    var consultarAPI =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var productoConsulta;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return clienteAxios.get(\"/productos/\".concat(id));\n\n              case 2:\n                productoConsulta = _context.sent;\n                guardarProducto(productoConsulta.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function consultarAPI() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    consultarAPI();\n  }, []); // Edita un Producto en la base de datos\n\n  var editarProducto =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(e) {\n      var formData, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault(); // crear un formdata\n\n              formData = new FormData();\n              formData.append('nombre', producto.nombre);\n              formData.append('precio', producto.precio);\n              formData.append('imagen', archivo); // almacenarlo en la BD\n\n              _context2.prev = 5;\n              _context2.next = 8;\n              return clienteAxios.put(\"/productos/\".concat(id), formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n\n            case 8:\n              res = _context2.sent;\n\n              // Lanzar una alerta\n              if (res.status === 200) {\n                Swal.fire('Editado Correctamente', res.data.mensaje, 'success');\n              } // redireccionar\n\n\n              props.history.push('/productos');\n              _context2.next = 17;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](5);\n              console.log(_context2.t0); // lanzar alerta\n\n              Swal.fire({\n                type: 'error',\n                title: 'Hubo un error',\n                text: 'Vuelva a intentarlo'\n              });\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[5, 13]]);\n    }));\n\n    return function editarProducto(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // leer los datos del formulario\n\n\n  var leerInformacionProducto = function leerInformacionProducto(e) {\n    guardarProducto(_objectSpread({}, producto, _defineProperty({}, e.target.name, e.target.value)));\n  }; // coloca la imagen en el state\n\n\n  var leerArchivo = function leerArchivo(e) {\n    guardarArchivo(e.target.files[0]);\n  }; // extraer los valores del state\n\n\n  var nombre = producto.nombre,\n      precio = producto.precio,\n      imagen = producto.imagen;\n  if (!nombre) return React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  });\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Editar Producto\"), React.createElement(\"form\", {\n    onSubmit: editarProducto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Llena todos los campos\"), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Nombre:\"), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Nombre Producto\",\n    name: \"nombre\",\n    onChange: leerInformacionProducto,\n    defaultValue: nombre,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Precio:\"), React.createElement(\"input\", {\n    type: \"number\",\n    name: \"precio\",\n    min: \"0.00\",\n    step: \"0.01\",\n    placeholder: \"Precio\",\n    onChange: leerInformacionProducto,\n    defaultValue: precio,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Imagen:\"), imagen ? React.createElement(\"img\", {\n    src: \"http://localhost:5000/\".concat(imagen),\n    alt: \"imagen\",\n    width: \"300\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }) : null, React.createElement(\"input\", {\n    type: \"file\",\n    name: \"imagen\",\n    onChange: leerArchivo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-azul\",\n    value: \"Editar Producto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }))));\n}\n\nexport default withRouter(EditarProductos);","map":{"version":3,"sources":["C:\\laragon\\www\\frontend_Ticket\\src\\componentes\\productos\\EditarProducto.js"],"names":["React","useState","useEffect","Fragment","Swal","clienteAxios","withRouter","Spinner","EditarProductos","props","id","match","params","nombre","precio","imagen","producto","guardarProducto","archivo","guardarArchivo","consultarAPI","get","productoConsulta","data","editarProducto","e","preventDefault","formData","FormData","append","put","headers","res","status","fire","mensaje","history","push","console","log","type","title","text","leerInformacionProducto","target","name","value","leerArchivo","files"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, Fragment} from 'react';\nimport Swal from 'sweetalert2';\nimport clienteAxios from '../../config/axios';\nimport { withRouter } from 'react-router-dom';\nimport Spinner from '../layout/Spinner';\n\nfunction EditarProductos(props) {\n\n    // obtener el ID\n    const { id } = props.match.params;\n\n    // producto = state, y funcion para actualizar\n    const [ producto, guardarProducto ] = useState({\n        nombre: '',\n        precio: '',\n        imagen : ''\n    });\n\n    // archivo = state, guardarArchivo = setState\n    const [archivo, guardarArchivo] = useState('');\n\n    // cuando el componente carga\n    useEffect(() => {\n         // consultar la api para traer el producto a editar\n        const consultarAPI = async () => {\n            const productoConsulta = await clienteAxios.get(`/productos/${id}`);\n            guardarProducto(productoConsulta.data);\n        }\n\n        consultarAPI();\n    }, [])\n\n    // Edita un Producto en la base de datos\n    const editarProducto = async e => {\n        e.preventDefault();\n\n        // crear un formdata\n        const formData = new FormData();\n        formData.append('nombre', producto.nombre);\n        formData.append('precio', producto.precio);\n        formData.append('imagen', archivo);\n\n        // almacenarlo en la BD\n        try {\n            const res = await clienteAxios.put(`/productos/${id}`, formData, {\n                headers: {\n                    'Content-Type' : 'multipart/form-data'\n                }\n            } );\n\n            // Lanzar una alerta\n            if(res.status === 200) {\n                Swal.fire(\n                    'Editado Correctamente',\n                    res.data.mensaje,\n                    'success'\n                )\n            }\n\n            // redireccionar\n            props.history.push('/productos');\n\n        } catch (error) {\n            console.log(error);\n            // lanzar alerta\n            Swal.fire({\n                type:'error',\n                title: 'Hubo un error',\n                text: 'Vuelva a intentarlo'\n            })\n        }\n    }\n\n    // leer los datos del formulario\n    const leerInformacionProducto = e => {\n        guardarProducto({\n            // obtener una copia del state y agregar el nuevo\n            ...producto,\n            [e.target.name] : e.target.value\n        })\n    }\n\n    // coloca la imagen en el state\n    const leerArchivo = e => {\n        guardarArchivo( e.target.files[0] );\n    }\n\n    // extraer los valores del state\n    const { nombre, precio, imagen } = producto;\n\n    if(!nombre) return <Spinner />\n\n    return (\n        <Fragment>\n            <h2>Editar Producto</h2>\n\n            <form\n                onSubmit={editarProducto}\n            >\n                <legend>Llena todos los campos</legend>\n\n                <div className=\"campo\">\n                    <label>Nombre:</label>\n                    <input \n                        type=\"text\" \n                        placeholder=\"Nombre Producto\" \n                        name=\"nombre\"\n                        onChange={leerInformacionProducto}\n                        defaultValue={nombre}\n                    />\n                </div>\n\n                <div className=\"campo\">\n                    <label>Precio:</label>\n                    <input \n                        type=\"number\" \n                        name=\"precio\" \n                        min=\"0.00\" \n                        step=\"0.01\" \n                        placeholder=\"Precio\"\n                        onChange={leerInformacionProducto}\n                        defaultValue={precio}\n                    />\n                </div>\n\n                <div className=\"campo\">\n                    <label>Imagen:</label>\n                    { imagen ? (\n                        <img src={`http://localhost:5000/${imagen}`} alt=\"imagen\" width=\"300\" />\n                    ) : null }\n                    <input \n                        type=\"file\"  \n                        name=\"imagen\"\n                        onChange={leerArchivo}\n                    />\n                </div>\n\n                <div className=\"enviar\">\n                        <input type=\"submit\" className=\"btn btn-azul\" value=\"Editar Producto\" />\n                </div>\n            </form>\n        </Fragment>\n    )\n}\nexport default withRouter(EditarProductos);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\src\\\\componentes\\\\Ticket\\\\Report.js\";\nimport React, { useEffect, useState, useContext, Fragment } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport clienteAxios from '../../config/axios';\nimport Swal from 'sweetalert2';\nimport DataTable from 'react-data-table-component';\nimport nextId from \"react-id-generator\";\n\nfunction Report(props) {\n  var _useState = useState({\n    start: '',\n    dateend: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      datos = _useState2[0],\n      guardarDatos = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      estado = _useState4[0],\n      setestado = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      resultado = _useState6[0],\n      setResultado = _useState6[1];\n\n  var actualizarState = function actualizarState(e) {\n    // Almacenar lo que el usuario escribe en el state\n    guardarDatos(_objectSpread({}, datos, _defineProperty({}, e.target.name, e.target.value)));\n  }; // Añade en la REST API un cliente nuevo\n\n\n  var GererarReporte = function GererarReporte(e) {\n    e.preventDefault(); //  console.log(datos);\n\n    if (datos.dateend == '' || datos.start == '') {\n      Swal.fire({\n        type: 'error',\n        title: 'Hubo un error',\n        text: 'debes seleccionar una fecha valida'\n      });\n      return;\n    } else {\n      var report = {};\n      report.fechas = datos;\n      report.estado = estado; //console.log(report)\n\n      clienteAxios.post('/Report', report, {\n        headers: {\n          Authorization: \"Bearer \".concat(localStorage.getItem('token'))\n        }\n      }).then(function (res) {\n        // validar si hay errores de mongo \n        if (res.data === 'No Autenticado, no hay JWT') {\n          Swal.fire({\n            type: 'error',\n            title: 'Hubo un error',\n            text: 'Token expirado o no existe'\n          });\n          props.history.push('/iniciar-sesion');\n        } else {\n          setResultado(res.data);\n        } // Redireccionar\n        // props.history.push('/');\n\n      }); //setResultado\n    }\n  };\n\n  var columna = [{\n    name: 'id',\n    selector: 'id',\n    sortable: true\n  }, {\n    name: 'DATE',\n    selector: 'date',\n    sortable: true\n  }, {\n    name: 'HOURS',\n    selector: 'hours',\n    sortable: true\n  }, {\n    name: 'END DATE',\n    selector: 'enddate',\n    sortable: true\n  }, {\n    name: 'SUBJECT',\n    selector: 'subject',\n    sortable: true\n  }, {\n    name: 'description',\n    selector: 'description',\n    sortable: true\n  }, {\n    name: 'USER ID',\n    selector: 'user_id',\n    sortable: true\n  }, {\n    name: 'USERNAME',\n    selector: 'name',\n    sortable: true\n  }];\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"Report\"), React.createElement(\"form\", {\n    onSubmit: GererarReporte,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"date start:\"), React.createElement(\"input\", {\n    type: \"date\",\n    placeholder: \"Empresa Cliente\",\n    name: \"start\",\n    onChange: actualizarState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"date end:\"), React.createElement(\"input\", {\n    type: \"date\",\n    placeholder: \"Email Cliente\",\n    name: \"dateend\",\n    onChange: actualizarState,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"Estado:\"), React.createElement(\"select\", {\n    className: \"campo\",\n    name: \"user\",\n    value: estado,\n    onChange: function onChange(e) {\n      var estado = e.target.value;\n      setestado(estado);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"Seleccionar\"), React.createElement(\"option\", {\n    value: \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Activo\"), React.createElement(\"option\", {\n    value: \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Cerrado\"))), React.createElement(\"div\", {\n    className: \"enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-azul\",\n    value: \"Generar Reporte\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }))), React.createElement(DataTable, {\n    columns: columna,\n    data: resultado,\n    title: \"Listado De Tickets\",\n    key: nextId(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }));\n}\n\nexport default withRouter(Report);","map":{"version":3,"sources":["C:\\laragon\\www\\frontend_Ticket\\src\\componentes\\Ticket\\Report.js"],"names":["React","useEffect","useState","useContext","Fragment","Link","withRouter","clienteAxios","Swal","DataTable","nextId","Report","props","start","dateend","datos","guardarDatos","estado","setestado","resultado","setResultado","actualizarState","e","target","name","value","GererarReporte","preventDefault","fire","type","title","text","report","fechas","post","headers","Authorization","localStorage","getItem","then","res","data","history","push","columna","selector","sortable"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext, Fragment } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport clienteAxios from '../../config/axios';\r\nimport Swal from 'sweetalert2';\r\nimport DataTable from 'react-data-table-component';\r\nimport nextId from \"react-id-generator\";\r\n\r\nfunction Report(props) {\r\n\r\n    const[datos, guardarDatos] = useState({      \r\n        start : '',\r\n        dateend: ''\r\n    });\r\n\r\n    const [estado, setestado] = useState(0);\r\n    const [resultado, setResultado] = useState(0);\r\n\r\n    const actualizarState = e => {\r\n        // Almacenar lo que el usuario escribe en el state\r\n        guardarDatos({\r\n            // obtener una copia del state actual\r\n            ...datos, \r\n            [e.target.name] : e.target.value\r\n        })\r\n\r\n    }\r\n\r\n        // Añade en la REST API un cliente nuevo\r\n        const GererarReporte = e => {\r\n            e.preventDefault();\r\n    \r\n          //  console.log(datos);\r\n            if(datos.dateend=='' || datos.start==''){\r\n\r\n                Swal.fire({\r\n                    type: 'error',\r\n                    title: 'Hubo un error',\r\n                    text: 'debes seleccionar una fecha valida'\r\n                })\r\n\r\n                return;\r\n\r\n            }else{\r\n                \r\n                var report = {};\r\n                report.fechas = datos;\r\n                report.estado = estado;\r\n                //console.log(report)\r\n\r\n                clienteAxios.post('/Report', report,{\r\n                    headers: {\r\n                        Authorization : `Bearer ${localStorage.getItem('token')}`\r\n                    }\r\n                }).then(res => {\r\n                    // validar si hay errores de mongo \r\n                    if(res.data ==='No Autenticado, no hay JWT') {\r\n                        Swal.fire({\r\n                            type: 'error',\r\n                            title: 'Hubo un error',\r\n                            text: 'Token expirado o no existe'\r\n                        })\r\n                        props.history.push('/iniciar-sesion');\r\n                    } else {\r\n                        setResultado(res.data)\r\n                    }\r\n                    // Redireccionar\r\n                   // props.history.push('/');\r\n                });\r\n                \r\n\r\n                //setResultado\r\n                \r\n\r\n            }\r\n        \r\n        }\r\n\r\n\r\n        const columna = [\r\n            {\r\n             name: 'id',\r\n             selector: 'id',\r\n             sortable: true\r\n            },\r\n            {\r\n             name: 'DATE',\r\n             selector: 'date',\r\n             sortable: true\r\n            },\r\n            {\r\n                name: 'HOURS',\r\n                selector: 'hours',\r\n                sortable: true\r\n            },\r\n            {\r\n                name: 'END DATE',\r\n                selector: 'enddate',\r\n                sortable: true\r\n               },\r\n            {\r\n             name: 'SUBJECT',\r\n             selector: 'subject',\r\n             sortable: true\r\n            },\r\n            {\r\n             name: 'description',\r\n             selector: 'description',\r\n             sortable: true\r\n            },\r\n            {\r\n                name: 'USER ID',\r\n                selector: 'user_id',\r\n                sortable: true\r\n            },\r\n            {\r\n                name: 'USERNAME',\r\n                selector: 'name',\r\n                sortable: true\r\n            }\r\n         \r\n          \r\n           \r\n        ] \r\n    \r\n\r\n\r\n    return (\r\n        <Fragment>\r\n\r\n       \r\n\r\n            <h2>Report</h2>\r\n\r\n            <form\r\n                onSubmit={GererarReporte}\r\n            >\r\n                <div className=\"campo\">\r\n                        <label>date start:</label>\r\n                        <input type=\"date\" \r\n                            placeholder=\"Empresa Cliente\" \r\n                            name=\"start\" \r\n                            onChange={actualizarState}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"campo\">\r\n                        <label>date end:</label>\r\n                        <input type=\"date\" \r\n                                placeholder=\"Email Cliente\" \r\n                                name=\"dateend\" \r\n                                onChange={actualizarState}\r\n                        />\r\n                    </div>\r\n                    <div className=\"campo\">\r\n                        <label>Estado:</label>\r\n                        <select\r\n                            className=\"campo\"\r\n                            name=\"user\"\r\n                            value={estado}\r\n                            onChange={(e) => {\r\n                            const estado = e.target.value;\r\n                            setestado(estado);\r\n                            }}\r\n                        >\r\n                            <option value=\"0\">Seleccionar</option> \r\n                            <option value=\"1\">Activo</option>  \r\n                            <option value=\"2\">Cerrado</option>     \r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"enviar\">\r\n                    <input \r\n                        type=\"submit\" \r\n                        className=\"btn btn-azul\" \r\n                        value=\"Generar Reporte\" \r\n                       \r\n                    />\r\n                </div>\r\n            </form>\r\n\r\n            <DataTable\r\n                columns={columna}\r\n                data={resultado}\r\n                title='Listado De Tickets'\r\n                key={nextId()}\r\n            />\r\n\r\n        </Fragment>\r\n       \r\n     )\r\n\r\n}\r\n\r\nexport default withRouter(Report);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\src\\\\componentes\\\\clientes\\\\Clientes.js\";\nimport React, { useEffect, useState, useContext, Fragment } from 'react'; // importar cliente axios\n\nimport clienteAxios from '../../config/axios';\nimport Cliente from './Cliente';\nimport Spinner from '../layout/Spinner';\nimport { Link, withRouter } from 'react-router-dom'; // import el Context\n\nimport { CRMContext } from '../../context/CRMContext';\n\nfunction Clientes(props) {\n  // Trabajar con el state\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clientes = _useState2[0],\n      guardarClientes = _useState2[1]; // utilizar valores del context\n\n\n  var _useContext = useContext(CRMContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      auth = _useContext2[0],\n      guardarAuth = _useContext2[1]; // use effect es similar a componentdidmount y willmount\n\n\n  useEffect(function () {\n    if (auth.token !== '') {\n      // Query a la API\n      var consultarAPI =\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var clientesConsulta;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return clienteAxios.get('/clientes', {\n                    headers: {\n                      Authorization: \"Bearer \".concat(auth.token)\n                    }\n                  });\n\n                case 3:\n                  clientesConsulta = _context.sent;\n                  // colocar el resultado en el state\n                  guardarClientes(clientesConsulta.data);\n                  _context.next = 10;\n                  break;\n\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context[\"catch\"](0);\n\n                  // Error con authorizacion\n                  if (_context.t0.response.status = 500) {\n                    props.history.push('/iniciar-sesion');\n                  }\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 7]]);\n        }));\n\n        return function consultarAPI() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      consultarAPI();\n    } else {\n      props.history.push('/iniciar-sesion');\n    }\n  }, [clientes]); // Si el state esta como false\n\n  if (!auth.auth) {\n    props.history.push('/iniciar-sesion');\n  }\n\n  if (!clientes.length) return React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  });\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Clientes\"), React.createElement(Link, {\n    to: \"/clientes/nuevo\",\n    className: \"btn btn-verde nvo-cliente\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), \"Nuevo Cliente\"), React.createElement(\"ul\", {\n    className: \"listado-clientes\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, clientes.map(function (cliente) {\n    return React.createElement(Cliente, {\n      key: cliente._id,\n      cliente: cliente,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    });\n  })));\n}\n\nexport default withRouter(Clientes);","map":{"version":3,"sources":["C:\\laragon\\www\\frontend_Ticket\\src\\componentes\\clientes\\Clientes.js"],"names":["React","useEffect","useState","useContext","Fragment","clienteAxios","Cliente","Spinner","Link","withRouter","CRMContext","Clientes","props","clientes","guardarClientes","auth","guardarAuth","token","consultarAPI","get","headers","Authorization","clientesConsulta","data","response","status","history","push","length","map","cliente","_id"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,EAAiDC,QAAjD,QAAiE,OAAjE,C,CAEA;;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC,C,CAEA;;AACA,SAASC,UAAT,QAA2B,0BAA3B;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACrB;AADqB,kBAGiBV,QAAQ,CAAC,EAAD,CAHzB;AAAA;AAAA,MAGbW,QAHa;AAAA,MAGHC,eAHG,kBAKrB;;;AALqB,oBAMQX,UAAU,CAAEO,UAAF,CANlB;AAAA;AAAA,MAMdK,IANc;AAAA,MAMRC,WANQ,oBAQrB;;;AACAf,EAAAA,SAAS,CAAE,YAAM;AAEb,QAAGc,IAAI,CAACE,KAAL,KAAe,EAAlB,EAAsB;AAClB;AACA,UAAMC,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEkBb,YAAY,CAACc,GAAb,CAAiB,WAAjB,EAA8B;AACzDC,oBAAAA,OAAO,EAAE;AACLC,sBAAAA,aAAa,mBAAaN,IAAI,CAACE,KAAlB;AADR;AADgD,mBAA9B,CAFlB;;AAAA;AAEPK,kBAAAA,gBAFO;AAQb;AACAR,kBAAAA,eAAe,CAACQ,gBAAgB,CAACC,IAAlB,CAAf;AATa;AAAA;;AAAA;AAAA;AAAA;;AAYb;AACA,sBAAG,YAAMC,QAAN,CAAeC,MAAf,GAAwB,GAA3B,EAAgC;AAC5Bb,oBAAAA,KAAK,CAACc,OAAN,CAAcC,IAAd,CAAmB,iBAAnB;AACH;;AAfY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAH;;AAAA,wBAAZT,YAAY;AAAA;AAAA;AAAA,SAAlB;;AAkBAA,MAAAA,YAAY;AACf,KArBD,MAqBO;AACHN,MAAAA,KAAK,CAACc,OAAN,CAAcC,IAAd,CAAmB,iBAAnB;AACH;AACJ,GA1BQ,EA0BN,CAACd,QAAD,CA1BM,CAAT,CATqB,CAsCrB;;AACA,MAAG,CAACE,IAAI,CAACA,IAAT,EAAe;AACXH,IAAAA,KAAK,CAACc,OAAN,CAAcC,IAAd,CAAmB,iBAAnB;AACH;;AAED,MAAG,CAACd,QAAQ,CAACe,MAAb,EAAqB,OAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAGrB,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAII,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAE,iBAAV;AAA6B,IAAA,SAAS,EAAC,2BAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,kBAJJ,EASI;AAAI,IAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKf,QAAQ,CAACgB,GAAT,CAAa,UAAAC,OAAO;AAAA,WACjB,oBAAC,OAAD;AACI,MAAA,GAAG,EAAEA,OAAO,CAACC,GADjB;AAEI,MAAA,OAAO,EAAED,OAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADiB;AAAA,GAApB,CADL,CATJ,CADJ;AAqBH;;AACD,eAAerB,UAAU,CAACE,QAAD,CAAzB","sourcesContent":["import React, { useEffect, useState, useContext, Fragment } from 'react';\n\n// importar cliente axios\nimport clienteAxios from '../../config/axios';\nimport Cliente from './Cliente';\nimport Spinner from '../layout/Spinner';\nimport { Link, withRouter } from 'react-router-dom';\n\n// import el Context\nimport { CRMContext } from '../../context/CRMContext';\n\nfunction Clientes(props) {\n    // Trabajar con el state\n    // clientes = state,  guardarClientes = funcion para guardar el state\n    const [ clientes, guardarClientes ] = useState([]);\n\n    // utilizar valores del context\n    const [auth, guardarAuth ] = useContext( CRMContext );\n\n    // use effect es similar a componentdidmount y willmount\n    useEffect( () => {\n\n        if(auth.token !== '') {\n            // Query a la API\n            const consultarAPI = async () => {\n                try {\n                    const clientesConsulta = await clienteAxios.get('/clientes', {\n                        headers: {\n                            Authorization : `Bearer ${auth.token}`\n                        }\n                    });\n    \n                    // colocar el resultado en el state\n                    guardarClientes(clientesConsulta.data);\n\n                } catch (error) {\n                    // Error con authorizacion\n                    if(error.response.status = 500) {\n                        props.history.push('/iniciar-sesion');\n                    }\n                }\n            }\n            consultarAPI();\n        } else {\n            props.history.push('/iniciar-sesion');\n        }\n    }, [clientes] );\n\n\n    // Si el state esta como false\n    if(!auth.auth) {\n        props.history.push('/iniciar-sesion');\n    }\n\n    if(!clientes.length) return <Spinner /> \n\n    \n    return (\n        <Fragment>\n        \n            <h2>Clientes</h2>\n\n            <Link to={\"/clientes/nuevo\"} className=\"btn btn-verde nvo-cliente\"> \n                <i className=\"fas fa-plus-circle\"></i>\n                Nuevo Cliente\n            </Link>\n\n            <ul className=\"listado-clientes\">\n                {clientes.map(cliente => (\n                    <Cliente \n                        key={cliente._id}\n                        cliente={cliente}\n                    />\n                ))}\n            </ul>\n\n        </Fragment>\n    )\n}\nexport default withRouter(Clientes);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\src\\\\componentes\\\\Ticket\\\\Tickets.js\";\nimport React, { useEffect, useState, useContext, Fragment } from 'react'; // importar cliente axios\n\nimport clienteAxios from '../../config/axios';\nimport Swal from 'sweetalert2';\nimport { Link, withRouter } from 'react-router-dom';\nimport DataTable from 'react-data-table-component';\nimport nextId from \"react-id-generator\";\n\nfunction Tickets(props) {\n  // Trabajar con el state\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clientes = _useState2[0],\n      guardarClientes = _useState2[1]; // use effect es similar a componentdidmount y willmount\n\n\n  useEffect(function () {\n    consultarAPI();\n  }, []);\n  var columna = [{\n    name: 'ID',\n    selector: 'id',\n    sortable: true\n  }, {\n    name: 'DATE',\n    selector: 'date',\n    sortable: true\n  }, {\n    name: 'SUBJECT',\n    selector: 'subject',\n    sortable: true\n  }, {\n    name: 'description',\n    selector: 'description',\n    sortable: true\n  }, {\n    name: 'action',\n    cell: function cell(id) {\n      return React.createElement(React.Fragment, null, React.createElement(\"span\", {\n        onClick: function onClick() {\n          return EditTicket(id);\n        },\n        className: \"btn btn-rojo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"E\"), \"\\xA0\\xA0\", React.createElement(\"span\", {\n        onClick: function onClick() {\n          return Finish(id);\n        },\n        className: \"btn btn-verde\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"F\"));\n    }\n  }];\n\n  var EditTicket = function EditTicket(id) {\n    console.log(id);\n  };\n\n  var Finish = function Finish(id) {\n    Swal.fire({\n      title: '¿Estás seguro?',\n      text: \"Seguro quieres Finalizar este Ticket?\",\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, Finalizar',\n      cancelButtonText: 'No, Cancelar'\n    }).then(function (result) {\n      console.log(localStorage.getItem('token'));\n\n      if (result.value) {\n        // eliminar en la rest api\n\n        /*clienteAxios.put(`/Ticket/${id.id}`, {\r\n          headers: {\r\n              Authorization : `Bearer ${localStorage.getItem('token')}`\r\n           }   \r\n          })*/\n        clienteAxios.put(\"Ticket/\".concat(id.id), {\n          headers: {\n            Authorization: \"Bearer \".concat(localStorage.getItem('token'))\n          }\n        }).then(function (res) {\n          if (res.status === 200) {\n            Swal.fire('Eliminado', res.data.mensaje, 'success');\n          } else {\n            props.history.push('/iniciar-sesion');\n          }\n        });\n      }\n    });\n  }; // Query a la API\n\n\n  var consultarAPI =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var clientesConsulta;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return clienteAxios.get('/Ticket', {\n                headers: {\n                  Authorization: \"Bearer \".concat(localStorage.getItem('token'))\n                }\n              });\n\n            case 3:\n              clientesConsulta = _context.sent;\n              // colocar el resultado en el state\n              guardarClientes(clientesConsulta.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n\n              // Error con authorizacion\n              if (_context.t0.response.status = 500) {\n                props.history.push('/iniciar-sesion');\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function consultarAPI() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // Si el state esta como false\n\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Tickets\"), React.createElement(Link, {\n    to: \"/ticket/nuevo\",\n    className: \"btn btn-verde nvo-cliente\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-plus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), \"Nuevo Ticket\"), React.createElement(DataTable, {\n    columns: columna,\n    data: clientes,\n    title: \"Listado De Tickets\",\n    pagination: true,\n    key: nextId(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }));\n}\n\nexport default withRouter(Tickets);","map":{"version":3,"sources":["C:\\laragon\\www\\frontend_Ticket\\src\\componentes\\Ticket\\Tickets.js"],"names":["React","useEffect","useState","useContext","Fragment","clienteAxios","Swal","Link","withRouter","DataTable","nextId","Tickets","props","clientes","guardarClientes","consultarAPI","columna","name","selector","sortable","cell","id","EditTicket","Finish","console","log","fire","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","localStorage","getItem","value","put","headers","Authorization","res","status","data","mensaje","history","push","get","clientesConsulta","response"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext, Fragment } from 'react';\r\n\r\n// importar cliente axios\r\nimport clienteAxios from '../../config/axios';\r\nimport Swal from 'sweetalert2';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport DataTable from 'react-data-table-component';\r\nimport nextId from \"react-id-generator\";\r\n\r\n\r\nfunction Tickets(props) {\r\n\r\n    // Trabajar con el state\r\n    // clientes = state,  guardarClientes = funcion para guardar el state\r\n    const [clientes, guardarClientes] = useState([]);\r\n\r\n    \r\n\r\n    // use effect es similar a componentdidmount y willmount\r\n    useEffect( () => {\r\n\r\n        consultarAPI();\r\n            \r\n           \r\n       \r\n    }, [] );\r\n\r\n   const columna = [\r\n       {\r\n        name: 'ID',\r\n        selector: 'id',\r\n        sortable: true\r\n       },\r\n       {\r\n        name: 'DATE',\r\n        selector: 'date',\r\n        sortable: true\r\n       },\r\n       {\r\n        name: 'SUBJECT',\r\n        selector: 'subject',\r\n        sortable: true\r\n       },\r\n       {\r\n        name: 'description',\r\n        selector: 'description',\r\n        sortable: true\r\n       },\r\n    \r\n       {\r\n        name: 'action',\r\n        cell: (id ) => (\r\n            <>\r\n            <span onClick={() => EditTicket(id)} className='btn btn-rojo'>E</span>&nbsp;&nbsp;\r\n\r\n            <span onClick={() => Finish(id)} className='btn btn-verde'>F</span>\r\n          </>\r\n        ),\r\n       }\r\n      \r\n   ] \r\n\r\nconst EditTicket = (id) => {\r\n    console.log(id);\r\n};\r\n\r\n const Finish = (id) => {\r\n    Swal.fire({\r\n        title: '¿Estás seguro?',\r\n        text: \"Seguro quieres Finalizar este Ticket?\",\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Si, Finalizar',\r\n        cancelButtonText : 'No, Cancelar'\r\n    }).then((result) => {\r\n        console.log(localStorage.getItem('token'));\r\n        if (result.value) {\r\n          // eliminar en la rest api\r\n          /*clienteAxios.put(`/Ticket/${id.id}`, {\r\n            headers: {\r\n                Authorization : `Bearer ${localStorage.getItem('token')}`\r\n             }   \r\n            })*/\r\n             clienteAxios.put(`Ticket/${id.id}`,{\r\n                headers: {\r\n                    Authorization : `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            })\r\n            .then(res => {\r\n                if(res.status === 200) {\r\n                    Swal.fire(\r\n                        'Eliminado',\r\n                        res.data.mensaje,\r\n                        'success'\r\n                    )\r\n                }else{\r\n                    props.history.push('/iniciar-sesion');\r\n                }\r\n            })\r\n        }\r\n    })\r\n};\r\n// Query a la API\r\nconst consultarAPI = async () => {\r\n    try {\r\n        const clientesConsulta = await clienteAxios.get('/Ticket', {\r\n            headers: {\r\n                Authorization : `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        });\r\n\r\n        // colocar el resultado en el state\r\n        guardarClientes(clientesConsulta.data);\r\n\r\n    } catch (error) {\r\n        // Error con authorizacion\r\n        if(error.response.status = 500) {\r\n            props.history.push('/iniciar-sesion');\r\n        }\r\n    }\r\n}\r\n    // Si el state esta como false\r\n \r\n\r\n   \r\n\r\n    \r\n    return (\r\n        <Fragment>\r\n        \r\n            <h2>Tickets</h2>\r\n\r\n            <Link to={\"/ticket/nuevo\"} className=\"btn btn-verde nvo-cliente\"> \r\n                <i className=\"fas fa-plus-circle\"></i>\r\n                Nuevo Ticket\r\n            </Link>\r\n\r\n            <DataTable\r\n                columns={columna}\r\n                data={clientes}\r\n                title='Listado De Tickets'\r\n                pagination\r\n                key={nextId()}\r\n            />\r\n           \r\n\r\n        </Fragment>\r\n    )\r\n}\r\nexport default withRouter(Tickets);"]},"metadata":{},"sourceType":"module"}
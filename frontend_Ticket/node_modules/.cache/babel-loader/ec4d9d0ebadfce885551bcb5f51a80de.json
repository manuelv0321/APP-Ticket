{"ast":null,"code":"import _defineProperty from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\src\\\\componentes\\\\auth\\\\Login.js\";\nimport React, { useState } from 'react';\nimport Swal from 'sweetalert2';\nimport { withRouter } from 'react-router-dom';\nimport clienteAxios from '../../config/axios';\n\nfunction Login(props) {\n  // Auth y token\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      credenciales = _useState2[0],\n      guardarCredenciales = _useState2[1]; // iniciar sesión en el servidor\n\n\n  var iniciarSesion =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var respuesta, token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault(); // console.log(\"llego\")\n              // autenticar al usuario\n\n              _context.prev = 1;\n              _context.next = 4;\n              return clienteAxios.post('/iniciar-session', credenciales);\n\n            case 4:\n              respuesta = _context.sent;\n              //console.log(respuesta.data);\n              // extraer el token y colocarlo en localstorage\n              token = respuesta.data.token;\n              localStorage.setItem('token', token); // colocarlo en el state\n              // alerta\n\n              Swal.fire('Login Correcto', 'Has iniciado Sesión', 'success'); // redireccionar\n\n              props.history.push('/');\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              Swal.fire({\n                type: 'error',\n                title: 'Hubo un error',\n                text: _context.t0.response.data.mensaje\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 11]]);\n    }));\n\n    return function iniciarSesion(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // almacenar lo que el usuario escribe en el state\n\n\n  var leerDatos = function leerDatos(e) {\n    //console.log(e)\n    guardarCredenciales(_objectSpread({}, credenciales, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Iniciar Sesi\\xF3n\"), React.createElement(\"div\", {\n    className: \"contenedor-formulario\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: iniciarSesion,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"username\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"Usuario para Iniciar Sesi\\xF3n\",\n    required: true,\n    onChange: leerDatos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password para Iniciar Sesi\\xF3n\",\n    required: true,\n    onChange: leerDatos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Iniciar Sesi\\xF3n\",\n    className: \"btn btn-verde btn-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }))));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:\\laragon\\www\\frontend_Ticket\\src\\componentes\\auth\\Login.js"],"names":["React","useState","Swal","withRouter","clienteAxios","Login","props","credenciales","guardarCredenciales","iniciarSesion","e","preventDefault","post","respuesta","token","data","localStorage","setItem","fire","history","push","console","log","type","title","text","response","mensaje","leerDatos","target","name","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport Swal from 'sweetalert2';\nimport { withRouter } from 'react-router-dom';\nimport clienteAxios from '../../config/axios';\n\n\nfunction Login(props){\n\n    // Auth y token\n   \n\n    // State con los datos del formulario\n    const [ credenciales, guardarCredenciales] = useState({});\n\n\n    // iniciar sesión en el servidor\n    const iniciarSesion = async e => {\n        e.preventDefault();\n\n       // console.log(\"llego\")\n\n        // autenticar al usuario\n\n        try {\n\n            \n            const respuesta = await clienteAxios.post('/iniciar-session',credenciales);\n\n            //console.log(respuesta.data);\n            \n            // extraer el token y colocarlo en localstorage\n            const { token } = respuesta.data;\n            localStorage.setItem('token', token);\n\n            // colocarlo en el state\n           \n\n            // alerta\n           Swal.fire(\n                'Login Correcto',\n                'Has iniciado Sesión',\n                'success'\n            )\n\n            // redireccionar\n            props.history.push('/');\n\n            \n        } catch (error) {\n            console.log(error);\n            Swal.fire({\n                type: 'error',\n                title: 'Hubo un error',\n                text: error.response.data.mensaje\n            })\n        }\n    }\n\n    // almacenar lo que el usuario escribe en el state\n    const leerDatos = e => {\n        //console.log(e)\n        guardarCredenciales({\n            ...credenciales,\n            [e.target.name] : e.target.value\n        })\n    }\n\n    return(\n\n        <div className=\"login\">\n            <h2>Iniciar Sesión</h2>\n\n            <div className=\"contenedor-formulario\">\n                <form\n                    onSubmit={iniciarSesion}\n                >\n\n                    <div className=\"campo\">\n                        <label>username</label>\n                        <input \n                            type=\"text\"\n                            name=\"username\"\n                            placeholder=\"Usuario para Iniciar Sesión\"\n                            required\n                            onChange={leerDatos}\n                        />\n                    </div>\n\n                    <div className=\"campo\">\n                        <label>Password</label>\n                        <input \n                            type=\"password\"\n                            name=\"password\"\n                            placeholder=\"Password para Iniciar Sesión\"\n                            required\n                            onChange={leerDatos}\n                        />\n                    </div>\n\n                    <input type=\"submit\" value=\"Iniciar Sesión\" className=\"btn btn-verde btn-block\" />\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
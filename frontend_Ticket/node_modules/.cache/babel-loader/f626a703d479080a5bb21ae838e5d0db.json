{"ast":null,"code":"import _defineProperty from \"C:\\\\laragon\\\\www\\\\restapis_crm_frontend-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\laragon\\\\www\\\\restapis_crm_frontend-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\laragon\\\\www\\\\restapis_crm_frontend-master\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\restapis_crm_frontend-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\restapis_crm_frontend-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\restapis_crm_frontend-master\\\\src\\\\componentes\\\\productos\\\\NuevoProducto.js\";\nimport React, { useState, Fragment } from 'react';\nimport Swal from 'sweetalert2';\nimport clienteAxios from '../../config/axios';\nimport { withRouter } from 'react-router-dom';\n\nfunction NuevoProducto(props) {\n  //producto = state, guardarProducto = setstate\n  var _useState = useState({\n    nombre: '',\n    precio: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      producto = _useState2[0],\n      guardarProducto = _useState2[1]; // archivo = state, guardarArchivo = setState\n\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      archivo = _useState4[0],\n      guardarArchivo = _useState4[1]; // almacena el nuevo producto en la base de datos.\n\n\n  var agregarProducto =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var formData, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault(); // crear un formdata\n\n              formData = new FormData();\n              formData.append('nombre', producto.nombre);\n              formData.append('precio', producto.precio);\n              formData.append('imagen', archivo); // almacenarlo en la BD\n\n              _context.prev = 5;\n              _context.next = 8;\n              return clienteAxios.post('/productos', formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n\n            case 8:\n              res = _context.sent;\n\n              // Lanzar una alerta\n              if (res.status === 200) {\n                Swal.fire('Agregado Correctamente', res.data.mensaje, 'success');\n              } // redireccionar\n\n\n              props.history.push('/productos');\n              _context.next = 17;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](5);\n              console.log(_context.t0); // lanzar alerta\n\n              Swal.fire({\n                type: 'error',\n                title: 'Hubo un error',\n                text: 'Vuelva a intentarlo'\n              });\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 13]]);\n    }));\n\n    return function agregarProducto(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // leer los datos del formulario\n\n\n  var leerInformacionProducto = function leerInformacionProducto(e) {\n    guardarProducto(_objectSpread({}, producto, _defineProperty({}, e.target.name, e.target.value)));\n  }; // coloca la imagen en el state\n\n\n  var leerArchivo = function leerArchivo(e) {\n    guardarArchivo(e.target.files[0]);\n  };\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Nuevo Producto\"), React.createElement(\"form\", {\n    onSubmit: agregarProducto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Llena todos los campos\"), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Nombre:\"), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Nombre Producto\",\n    name: \"nombre\",\n    onChange: leerInformacionProducto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Precio:\"), React.createElement(\"input\", {\n    type: \"number\",\n    name: \"precio\",\n    min: \"0.00\",\n    step: \"0.01\",\n    placeholder: \"Precio\",\n    onChange: leerInformacionProducto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Imagen:\"), React.createElement(\"input\", {\n    type: \"file\",\n    name: \"imagen\",\n    onChange: leerArchivo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-azul\",\n    value: \"Agregar Producto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }))));\n}\n\nexport default withRouter(NuevoProducto);","map":{"version":3,"sources":["C:\\laragon\\www\\restapis_crm_frontend-master\\src\\componentes\\productos\\NuevoProducto.js"],"names":["React","useState","Fragment","Swal","clienteAxios","withRouter","NuevoProducto","props","nombre","precio","producto","guardarProducto","archivo","guardarArchivo","agregarProducto","e","preventDefault","formData","FormData","append","post","headers","res","status","fire","data","mensaje","history","push","console","log","type","title","text","leerInformacionProducto","target","name","value","leerArchivo","files"],"mappings":"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","sourcesContent":["import React, {useState, Fragment} from 'react';\nimport Swal from 'sweetalert2';\nimport clienteAxios from '../../config/axios';\nimport { withRouter } from 'react-router-dom';\n\nfunction NuevoProducto(props) {\n\n    //producto = state, guardarProducto = setstate\n    const [producto, guardarProducto] = useState({\n        nombre: '',\n        precio: ''\n    });\n    // archivo = state, guardarArchivo = setState\n    const [archivo, guardarArchivo] = useState('');\n\n    // almacena el nuevo producto en la base de datos.\n    const agregarProducto = async e => {\n        e.preventDefault();\n\n        // crear un formdata\n        const formData = new FormData();\n        formData.append('nombre', producto.nombre);\n        formData.append('precio', producto.precio);\n        formData.append('imagen', archivo);\n\n        // almacenarlo en la BD\n        try {\n            const res = await clienteAxios.post('/productos', formData, {\n                headers: {\n                    'Content-Type' : 'multipart/form-data'\n                }\n            } );\n\n            // Lanzar una alerta\n            if(res.status === 200) {\n                Swal.fire(\n                    'Agregado Correctamente',\n                    res.data.mensaje,\n                    'success'\n                )\n            }\n\n            // redireccionar\n            props.history.push('/productos');\n\n        } catch (error) {\n            console.log(error);\n            // lanzar alerta\n            Swal.fire({\n                type:'error',\n                title: 'Hubo un error',\n                text: 'Vuelva a intentarlo'\n            })\n        }\n    }\n\n    // leer los datos del formulario\n    const leerInformacionProducto = e => {\n        guardarProducto({\n            // obtener una copia del state y agregar el nuevo\n            ...producto,\n            [e.target.name] : e.target.value\n        })\n    }\n\n    // coloca la imagen en el state\n    const leerArchivo = e => {\n        guardarArchivo( e.target.files[0] );\n    }\n\n    return (\n        <Fragment>\n            <h2>Nuevo Producto</h2>\n\n            <form\n                onSubmit={agregarProducto}\n            >\n                <legend>Llena todos los campos</legend>\n\n                <div className=\"campo\">\n                    <label>Nombre:</label>\n                    <input \n                        type=\"text\" \n                        placeholder=\"Nombre Producto\" \n                        name=\"nombre\"\n                        onChange={leerInformacionProducto}\n                    />\n                </div>\n\n                <div className=\"campo\">\n                    <label>Precio:</label>\n                    <input \n                        type=\"number\" \n                        name=\"precio\" \n                        min=\"0.00\" \n                        step=\"0.01\" \n                        placeholder=\"Precio\"\n                        onChange={leerInformacionProducto}\n                    />\n                </div>\n\n                <div className=\"campo\">\n                    <label>Imagen:</label>\n                    <input \n                        type=\"file\"  \n                        name=\"imagen\"\n                        onChange={leerArchivo}\n                    />\n                </div>\n\n                <div className=\"enviar\">\n                        <input type=\"submit\" className=\"btn btn-azul\" value=\"Agregar Producto\" />\n                </div>\n            </form>\n        </Fragment>\n    )\n}\nexport default withRouter(NuevoProducto);"]},"metadata":{},"sourceType":"module"}
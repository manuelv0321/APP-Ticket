{"ast":null,"code":"import _toConsumableArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\laragon\\\\www\\\\frontend_Ticket\\\\src\\\\componentes\\\\Ticket\\\\EditarTicket.js\";\nimport React, { Fragment, useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport { withRouter } from 'react-router-dom';\nimport clienteAxios from '../../config/axios';\nimport moment from 'moment';\n\nfunction EditarTicket(props) {\n  var id = props.match.params.id;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      usuarios = _useState2[0],\n      guardarUsuarios = _useState2[1];\n\n  useEffect(function () {\n    var token = localStorage.getItem('token', token); // Query a la API\n\n    var consultarAPI =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var clientesConsulta;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return clienteAxios.get(\"/Ticket/\".concat(id), {\n                  headers: {\n                    Authorization: \"Bearer \".concat(token)\n                  }\n                });\n\n              case 3:\n                clientesConsulta = _context.sent;\n                //console.log(clientesConsulta.data[0]);\n                // colocar el resultado en el state\n                guardarCliente(clientesConsulta.data[0]);\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n\n                // Error con authorizacion\n                if (_context.t0.response.status = 500) {\n                  props.history.push('/iniciar-sesion');\n                }\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      }));\n\n      return function consultarAPI() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    consultarAPI();\n  }, []);\n  useEffect(function () {\n    var token = localStorage.getItem('token', token); // Query a la API\n\n    var consultarAPICliente =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var clientesConsulta;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return clienteAxios.get('/clientes', {\n                  headers: {\n                    Authorization: \"Bearer \".concat(token)\n                  }\n                });\n\n              case 3:\n                clientesConsulta = _context2.sent;\n                //   console.log(clientesConsulta);\n                // colocar el resultado en el state\n                guardarUsuarios(clientesConsulta.data);\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                // Error con authorizacion\n                if (_context2.t0.response.status = 500) {\n                  props.history.push('/iniciar-sesion');\n                }\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n\n      return function consultarAPICliente() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    consultarAPICliente();\n  }, []); // cliente = state, guardarcliente = funcion para guardar el state\n\n  var _useState3 = useState({\n    subject: '',\n    sescription: '',\n    date: '',\n    dateend: '',\n    hours: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cliente = _useState4[0],\n      guardarCliente = _useState4[1]; // leer los datos del formulario\n\n\n  var actualizarState = function actualizarState(e) {\n    // Almacenar lo que el usuario escribe en el state\n    guardarCliente(_objectSpread({}, cliente, _defineProperty({}, e.target.name, e.target.value)));\n  }; // Añade en la REST API un cliente nuevo\n\n\n  var ActualizarTicket = function ActualizarTicket(e) {\n    e.preventDefault();\n    /* var Ticket = {};\r\n     Ticket.cliente =cliente;*/\n    // enviar petición\n\n    clienteAxios.post('/TicketUpdate', cliente, {\n      headers: {\n        Authorization: \"Bearer \".concat(localStorage.getItem('token'))\n      }\n    }).then(function (res) {\n      // validar si hay errores de mongo \n      if (res.data === 'No Autenticado, no hay JWT') {\n        Swal.fire({\n          type: 'error',\n          title: 'Hubo un error',\n          text: 'Token expirado o no existe'\n        });\n        props.history.push('/iniciar-sesion');\n      } else {\n        Swal.fire('Se agregó el Cliente', res.data.mensaje, 'success');\n      } // Redireccionar\n\n\n      props.history.push('/');\n    });\n  }; // verificar si el usuario esta autenticado o no\n\n\n  if (localStorage.getItem('token') === '') {\n    props.history.push('/iniciar-sesion');\n  }\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user = _useState6[0],\n      setuser = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      users = _useState8[0],\n      setUsers = _useState8[1]; //  const [guardaruser, setguardaruser] = useState(guardaruser);\n\n\n  var asignar = function asignar(id) {\n    setUsers([].concat(_toConsumableArray(users), [id]));\n  }; //const {date, dateend, description,hours,subject } = cliente;\n\n\n  var leerInformacionProducto = function leerInformacionProducto(e) {\n    guardarCliente(_objectSpread({}, cliente, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"Editar Ticket\"), React.createElement(\"form\", {\n    onSubmit: ActualizarTicket,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Llena todos los campos\"), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"Subject:\"), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Subject\",\n    name: \"subject\",\n    onChange: actualizarState,\n    defaultValue: cliente['subject'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, \"Description:\"), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Description\",\n    name: \"description\",\n    onChange: actualizarState,\n    defaultValue: cliente['description'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, \"date start:\"), React.createElement(\"input\", {\n    type: \"date\",\n    placeholder: \"Empresa Cliente\",\n    name: \"date\",\n    onChange: actualizarState // defaultValue={cliente['date']}\n    ,\n    defaultValue: moment.utc(cliente['start']).format('YYYY-MM-DD'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"date end:\"), React.createElement(\"input\", {\n    type: \"date\",\n    placeholder: \"Email Cliente\",\n    name: \"dateend\",\n    onChange: actualizarState //defaultValue={cliente['dateend']}\n    ,\n    defaultValue: moment.utc(cliente['start']).format('YYYY-MM-DD'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"campo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, \"hour:\"), React.createElement(\"input\", {\n    type: \"text\",\n    onKeyPress: function onKeyPress(event) {\n      if (!/[0-9]/.test(event.key)) {\n        event.preventDefault();\n      }\n    },\n    placeholder: \"Hour\",\n    name: \"hours\",\n    onChange: actualizarState,\n    defaultValue: cliente['hours'],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"enviar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-azul\",\n    value: \"Actualizar Ticket\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }))));\n} // HOC, es una función que toma un componente y retorna un nuevo componente\n\n\nexport default withRouter(EditarTicket);","map":{"version":3,"sources":["C:\\laragon\\www\\frontend_Ticket\\src\\componentes\\Ticket\\EditarTicket.js"],"names":["React","Fragment","useState","useEffect","Swal","withRouter","clienteAxios","moment","EditarTicket","props","id","match","params","usuarios","guardarUsuarios","token","localStorage","getItem","consultarAPI","get","headers","Authorization","clientesConsulta","guardarCliente","data","response","status","history","push","consultarAPICliente","subject","sescription","date","dateend","hours","cliente","actualizarState","e","target","name","value","ActualizarTicket","preventDefault","post","then","res","fire","type","title","text","mensaje","user","setuser","users","setUsers","asignar","leerInformacionProducto","utc","format","event","test","key"],"mappings":"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","sourcesContent":["import React, {Fragment, useState, useEffect} from 'react';\r\nimport Swal from 'sweetalert2';\r\nimport { withRouter } from 'react-router-dom'; \r\nimport clienteAxios from '../../config/axios';\r\nimport moment from 'moment';\r\n\r\n\r\nfunction EditarTicket(props){\r\n\r\n    const { id } = props.match.params;\r\n   \r\n    const [usuarios, guardarUsuarios ] = useState([]);\r\n\r\n    useEffect( () => {\r\n\r\n       \r\n\r\n       let token = localStorage.getItem('token', token);\r\n            // Query a la API\r\n            const consultarAPI = async () => {\r\n                try {\r\n                    const clientesConsulta = await clienteAxios.get(`/Ticket/${id}`, {\r\n                        headers: {\r\n                            Authorization : `Bearer ${token}`\r\n                        }\r\n                    });\r\n                    \r\n                    //console.log(clientesConsulta.data[0]);\r\n                    // colocar el resultado en el state\r\n                    guardarCliente(clientesConsulta.data[0]);\r\n\r\n                } catch (error) {\r\n                    // Error con authorizacion\r\n                    if(error.response.status = 500) {\r\n                       props.history.push('/iniciar-sesion');\r\n                    }\r\n                }\r\n            }\r\n            consultarAPI();\r\n        \r\n    }, [] );\r\n\r\n    useEffect( () => {\r\n\r\n        let token = localStorage.getItem('token', token);\r\n             // Query a la API\r\n             const consultarAPICliente = async () => {\r\n                 try {\r\n                     const clientesConsulta = await clienteAxios.get('/clientes', {\r\n                         headers: {\r\n                             Authorization : `Bearer ${token}`\r\n                         }\r\n                     });\r\n                     \r\n                  //   console.log(clientesConsulta);\r\n                     // colocar el resultado en el state\r\n                     guardarUsuarios(clientesConsulta.data);\r\n \r\n                 } catch (error) {\r\n                     // Error con authorizacion\r\n                     if(error.response.status = 500) {\r\n                        props.history.push('/iniciar-sesion');\r\n                     }\r\n                 }\r\n             }\r\n             consultarAPICliente();\r\n         \r\n     }, [] );\r\n\r\n\r\n   \r\n\r\n    // cliente = state, guardarcliente = funcion para guardar el state\r\n    const[cliente, guardarCliente] = useState({\r\n        subject: '',\r\n        sescription: '',\r\n        date : '',\r\n        dateend: '',\r\n        hours: ''\r\n    });\r\n\r\n    // leer los datos del formulario\r\n    const actualizarState = e => {\r\n        // Almacenar lo que el usuario escribe en el state\r\n        guardarCliente({\r\n            // obtener una copia del state actual\r\n            ...cliente, \r\n            [e.target.name] : e.target.value\r\n        })\r\n\r\n    }\r\n\r\n    // Añade en la REST API un cliente nuevo\r\n    const ActualizarTicket = e => {\r\n\r\n        e.preventDefault();\r\n\r\n\r\n       /* var Ticket = {};\r\n        Ticket.cliente =cliente;*/ \r\n        // enviar petición\r\n        clienteAxios.post('/TicketUpdate', cliente,{\r\n            headers: {\r\n                Authorization : `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        })\r\n            .then(res => {\r\n                // validar si hay errores de mongo \r\n                if(res.data ==='No Autenticado, no hay JWT') {\r\n                    Swal.fire({\r\n                        type: 'error',\r\n                        title: 'Hubo un error',\r\n                        text: 'Token expirado o no existe'\r\n                    })\r\n                    props.history.push('/iniciar-sesion');\r\n                } else {\r\n                    Swal.fire(\r\n                        'Se agregó el Cliente',\r\n                        res.data.mensaje,\r\n                        'success'\r\n                    )\r\n                }\r\n                // Redireccionar\r\n                props.history.push('/');\r\n            });\r\n    }\r\n\r\n   \r\n  \r\n\r\n    // verificar si el usuario esta autenticado o no\r\n    if(localStorage.getItem('token') ===''  ) {\r\n        props.history.push('/iniciar-sesion');\r\n    }\r\n\r\n    const [user, setuser] = useState(0);\r\n    const [users,setUsers] = useState([]);\r\n  //  const [guardaruser, setguardaruser] = useState(guardaruser);\r\n    const asignar =(id)=>{\r\n\r\n        setUsers([...users,id]);\r\n       \r\n     \r\n    }\r\n    //const {date, dateend, description,hours,subject } = cliente;\r\n\r\n    const leerInformacionProducto = e => {\r\n        guardarCliente({\r\n            // obtener una copia del state y agregar el nuevo\r\n            ...cliente,\r\n            [e.target.name] : e.target.value\r\n        })\r\n    }\r\n    return (\r\n\r\n\r\n        <Fragment>\r\n            <h2>Editar Ticket</h2>\r\n            \r\n            <form\r\n                onSubmit={ActualizarTicket}\r\n            >\r\n                <legend>Llena todos los campos</legend>\r\n                <div className=\"campo\">\r\n                    <label>Subject:</label>\r\n                    <input  type=\"text\" \r\n                            placeholder=\"Subject\" \r\n                            name=\"subject\"\r\n                            onChange={actualizarState}\r\n                            defaultValue={cliente['subject']}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"campo\">\r\n                    <label>Description:</label>\r\n                    <input type=\"text\" \r\n                          placeholder=\"Description\" \r\n                          name=\"description\" \r\n                          onChange={actualizarState}\r\n                          defaultValue={cliente['description']}\r\n                    />\r\n                </div>\r\n            \r\n                <div className=\"campo\">\r\n                    <label>date start:</label>\r\n                    <input type=\"date\" \r\n                          placeholder=\"Empresa Cliente\" \r\n                          name=\"date\" \r\n                          onChange={actualizarState}\r\n                         // defaultValue={cliente['date']}\r\n                         defaultValue={moment.utc(cliente['start']).format('YYYY-MM-DD')}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"campo\">\r\n                    <label>date end:</label>\r\n                    <input type=\"date\" \r\n                            placeholder=\"Email Cliente\" \r\n                            name=\"dateend\" \r\n                            onChange={actualizarState}\r\n                            //defaultValue={cliente['dateend']}\r\n                            defaultValue={moment.utc(cliente['start']).format('YYYY-MM-DD')}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"campo\">\r\n                    <label>hour:</label>\r\n                    <input type=\"text\" \r\n                          onKeyPress={(event) => {\r\n                            if (!/[0-9]/.test(event.key)) {\r\n                              event.preventDefault();\r\n                            }\r\n                        }}\r\n                            placeholder=\"Hour\" \r\n                            name=\"hours\" \r\n                            onChange={actualizarState}\r\n                            defaultValue={cliente['hours']}\r\n                    />\r\n                </div>\r\n\r\n           \r\n\r\n              \r\n                <br/>\r\n             \r\n\r\n                <div className=\"enviar\">\r\n                    <input \r\n                        type=\"submit\" \r\n                        className=\"btn btn-azul\" \r\n                        value=\"Actualizar Ticket\" \r\n                       \r\n                    />\r\n                </div>\r\n            </form>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\n// HOC, es una función que toma un componente y retorna un nuevo componente\r\nexport default  withRouter(EditarTicket);"]},"metadata":{},"sourceType":"module"}